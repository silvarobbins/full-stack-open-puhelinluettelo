{"version":3,"sources":["components/PersonForm.js","components/Filter.js","components/Persons.js","services/persons.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["PersonForm","newName","newNumber","addPerson","handleNameChange","handleNumberChange","onSubmit","value","onChange","type","Filter","filter","handleFilterChange","Persons","personsToShow","deletePerson","map","person","event","preventDefault","id","name","number","baseUrl","personsService","getAll","axios","get","then","response","data","create","newObject","post","del","delete","update","put","Notification","message","className","Error","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","notificationMessage","setNotificationMessage","errorMessage","setErrorMessage","useEffect","initalPersons","find","newPerson","returnedPerson","setTimeout","catch","error","n","toLowerCase","includes","target","indexOf","window","confirm","personObject","concat","console","log","findIndex","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.79632996.chunk.js","sourcesContent":["import React from 'react'\n\n\nconst PersonForm = ({newName, newNumber, addPerson, handleNameChange, handleNumberChange}) => {\n    return(\n        <div>\n            <h2>Add a new</h2>\n            <form onSubmit={addPerson}>\n                <div>\n                    Name: <input value={newName} onChange={handleNameChange}/>\n                </div>\n                    Number: <input value={newNumber} onChange={handleNumberChange}/>\n                <div>\n                    <button type=\"submit\">add</button>\n                </div>\n            </form>\n        </div>\n        )\n    }\n\nexport default PersonForm","const Filter = ({filter, handleFilterChange}) => {\n    return(\n    <div>\n        Filter shown with: <input value={filter} onChange={handleFilterChange} />\n    </div>\n    )\n}\n\nexport default Filter","const Persons = ({ personsToShow, deletePerson}) => {\n    return (\n    personsToShow.map(person => \n        <form \n            key={person.name} \n            onSubmit={(event) => {\n                event.preventDefault()\n                deletePerson(person.id)}}>\n                {person.name} {person.number}<button type=\"submit\">delete</button>\n        </form>\n        )\n    )}\n\nexport default Persons","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst del = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n  }\n\nconst personsService = { getAll, create, del, update }\n\nexport default personsService","const Notification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"notification\">\n        {message}\n      </div>\n    )\n  }\n\nexport default Notification","const Error = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\nexport default Error","import React, { useState, useEffect } from 'react'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Persons from './components/Persons'\nimport personsService from './services/persons'\nimport Notification from './components/Notification'\nimport Error from './components/Error'\nimport './index.css'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('' )\n  const [ filter, setNewFilter ] = useState('')\n  const [ notificationMessage, setNotificationMessage] = useState(null)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n   \n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(initalPersons => {setPersons(initalPersons)\n      })\n    }, [])\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    if(persons.map(person => person.name).indexOf(newName) >= 0) {\n      const response = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if (response)\n        update(persons[persons.map(person => person.name).indexOf(newName)].id)\n    } else {\n      const personObject = {\n        name: newName,\n        number: newNumber\n        }\n\n      personsService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNotificationMessage(`Added ${returnedPerson.name}`)\n          setTimeout(() => {\n            setNotificationMessage(null)\n          }, 5000);\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => {\n          console.log(error.response.data)          \n          setErrorMessage(`${error.response.data.error}`)\n          setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n          console.log(error.response.data)\n        })\n    }\n\n  }\n\n  const update = id => {\n    const person = persons.find(person => person.id === id)\n    const newPerson = {...person, number: newNumber}\n    personsService\n      .update(id, newPerson)\n      .then(returnedPerson => {\n        setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n        setNotificationMessage(`Updated ${returnedPerson.name}'s phone number`)\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 5000); })\n      .catch(error => {\n        setErrorMessage(`${error.response.data.error}`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n        setPersons(persons.filter(n => n.id !== id))\n      })\n  }\n\n  const deletePerson = id => {\n    const name = persons[persons.findIndex(person => person.id === id)].name\n    console.log(name)\n    personsService\n      .del(id)\n      .then(returnedPerson => {\n        setPersons(persons.filter(person => person.id !== id))\n        setNotificationMessage(`Deleted ${name}`)\n        setTimeout(() => {\n          setNotificationMessage(null)\n        }, 5000);\n      })\n  }\n\n  const personsToShow = filter === ''\n    ? persons\n    : persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n\n\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n        <Notification message={notificationMessage}/>\n        <Error message={errorMessage}/>\n        <Filter filter={filter} handleFilterChange={handleFilterChange}/>\n        <PersonForm newName={newName} newNumber={newNumber} addPerson={addPerson} handleNameChange={handleNameChange} handleNumberChange={ handleNumberChange}/> \n      <h2>Numbers</h2>\n        <Persons personsToShow={personsToShow} deletePerson={deletePerson}/>\n    </div>\n  )\n\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}